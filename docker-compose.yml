version: '3.8'
services:
  redis:
    image: redis:7
    ports:
      - "6379:6379"

  weaviate:
    image: cr.weaviate.io/semitechnologies/weaviate:1.27.0
    ports:
      - "8080:8080"   # REST API
      - "50051:50051" # gRPC API (Phải có cổng này)
    environment:
      QUERY_DEFAULTS_LIMIT: 25
      AUTHENTICATION_ANONYMOUS_ACCESS_ENABLED: 'true'
      PERSISTENCE_DATA_PATH: '/var/lib/weaviate'
      DEFAULT_VECTORIZER_MODULE: 'none' # Vì dùng Ollama làm vectorizer riêng
      ENABLE_MODULES: ''
      GRPC_PORT: 50051
